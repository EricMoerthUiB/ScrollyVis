class Arcball{constructor(t,i,e,s,o){this.arcCamera=i,this.arcScene=e,this.arcRenderer=t,this.arcWindow=s,this.type=-1,this.slice=o}onDocumentMouseDown(t){this.isClicking=!0,this.mousePositionStart=[2*((t.offsetX-this.arcWindow.offsetWidth)/this.arcWindow.offsetWidth+1)-1,(t.offsetY-this.arcWindow.offsetHeight)/this.arcWindow.offsetHeight*-2-1],this.objectPositionStart=[this.arcObject.position.x,this.arcObject.position.y],this.sliceObjectPositionStart=[this.sliceGroup.position.x,this.sliceGroup.position.y],this.objectRotationStart=[this.arcObject.rotation.x,this.arcObject.rotation.y],this.type=t.button}onDocumentMouseUp(t){this.isClicking=!1}onDocumentMouseWheel(t){!0===this.slice?(t.deltaY<0&&this.sliceGroup.children[0].material.uniforms.depth.value<=this.arcObject.children[0].material.uniforms.u_size.value.z?this.sliceGroup.children.forEach(t=>t.material.uniforms.depth.value=t.material.uniforms.depth.value+1):this.sliceGroup.children[0].material.uniforms.depth.value>0&&this.sliceGroup.children.forEach(t=>t.material.uniforms.depth.value=t.material.uniforms.depth.value-1),this.arcRenderer.render(this.arcScene,this.arcCamera)):(t.deltaY<0&&(this.arcCamera.zoom*=1.25),t.deltaY>0&&this.arcCamera.zoom>.1&&(this.arcCamera.zoom/=1.25),this.arcCamera.updateProjectionMatrix(),this.arcRenderer.render(this.arcScene,this.arcCamera))}onDocumentMouseMove(t){this.mousePosition=[2*((t.offsetX-this.arcWindow.offsetWidth)/this.arcWindow.offsetWidth+1)-1,(t.offsetY-this.arcWindow.offsetHeight)/this.arcWindow.offsetHeight*-2-1]}set object(t){this.arcObject=t}set sliceGroupValue(t){this.sliceGroup=t}set sliceValue(t){this.slice=t}animate(){if(requestAnimationFrame(()=>this.animate()),this.isClicking){if(this.mouseVector=[this.mousePosition[0]-this.mousePositionStart[0],this.mousePosition[1]-this.mousePositionStart[1]],1===this.type&&!1===this.slice)this.arcObject.position.x=this.objectPositionStart[0]+1*this.mouseVector[0]/this.arcCamera.zoom*200,this.arcObject.position.y=this.objectPositionStart[1]+1*this.mouseVector[1]/this.arcCamera.zoom*200;else if(1===this.type&&this.slice)this.sliceGroup.position.x=this.sliceObjectPositionStart[0]+1*this.mouseVector[0]/this.arcCamera.zoom*200,this.sliceGroup.position.y=this.sliceObjectPositionStart[1]+1*this.mouseVector[1]/this.arcCamera.zoom*200;else if(0===this.type&&!0===this.slice)this.mouseVector[0]>0?this.arcCamera.zoom*=1.02:this.arcCamera.zoom>.5&&(this.arcCamera.zoom/=1.02),this.arcCamera.updateProjectionMatrix(),this.arcRenderer.render(this.arcScene,this.arcCamera);else if(0===this.type&&!1===this.slice){let t=this.arcObject.position.x,i=this.arcObject.position.y;this.arcObject.position.x=0,this.arcObject.position.y=0,this.arcObject.rotation.x=this.objectRotationStart[0]+this.mouseVector[1]*Math.PI,this.arcObject.rotation.y=this.objectRotationStart[1]-this.mouseVector[0]*Math.PI,this.arcObject.position.x=t,this.arcObject.position.y=i}this.arcRenderer.render(this.arcScene,this.arcCamera)}}}